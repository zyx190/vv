<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="zh-CN" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="K短路算法" />
<meta property="og:locale" content="zh_CN" />
<meta name="description" content="前言" />
<meta property="og:description" content="前言" />
<link rel="canonical" href="http://localhost:4000/posts/k%E7%9F%AD%E8%B7%AF%E7%AE%97%E6%B3%95/" />
<meta property="og:url" content="http://localhost:4000/posts/k%E7%9F%AD%E8%B7%AF%E7%AE%97%E6%B3%95/" />
<meta property="og:site_name" content="Baymax’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-06-01T18:36:00+08:00" />
<meta property="og:image" content="http://localhost:4000/assets/img/favicons/avatar.png" /><meta name="twitter:card" content="summary_large_image" />
      <meta property="twitter:image" content="http://localhost:4000/assets/img/favicons/avatar.png" />
<meta property="twitter:title" content="K短路算法" />
<meta name="twitter:site" content="@" />
<meta name="google-site-verification" content="TGMxMQ337dKI-wX4cXqgjK7Ph-4ly5GYpjvCstU0dO8" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-06-01T18:36:00+08:00","datePublished":"2024-06-01T18:36:00+08:00","description":"前言","headline":"K短路算法","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/k%E7%9F%AD%E8%B7%AF%E7%AE%97%E6%B3%95/"},"url":"http://localhost:4000/posts/k%E7%9F%AD%E8%B7%AF%E7%AE%97%E6%B3%95/"}</script>
<!-- End Jekyll SEO tag -->


  <title>K短路算法 | Baymax's Blog
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Baymax's Blog">
<meta name="application-name" content="Baymax's Blog">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  
    

    <link rel="stylesheet" href="/assets/lib/fonts/main.css">
  

  <!-- GA -->
  

  <!-- Bootstrap -->
  <link rel="stylesheet" href="/assets/lib/bootstrap/bootstrap.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="/assets/lib/fontawesome-free/css/all.min.css">

  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  
    <link rel="stylesheet" href="/assets/lib/tocbot/tocbot.min.css">
  

  
    <link rel="stylesheet" href="/assets/lib/loading-attribute-polyfill/loading-attribute-polyfill.min.css">
  

  
    <!-- Manific Popup -->
    <link rel="stylesheet" href="/assets/lib/magnific-popup/magnific-popup.css">
  

  <!-- JavaScript -->

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      if (this.hasMode) {
        if (this.isDarkMode) {
          if (!this.isSysDarkPrefer) {
            this.setDark();
          }
        } else {
          if (this.isSysDarkPrefer) {
            this.setLight();
          }
        }
      }

      let self = this;

      /* always follow the system prefers */
      this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          if (self.isDarkMode) {
            if (!self.isSysDarkPrefer) {
              self.setDark();
            }
          } else {
            if (self.isSysDarkPrefer) {
              self.setLight();
            }
          }

          self.clearMode();
        }

        self.notify();
      });
    } /* constructor() */

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isSysDarkPrefer() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get isLightMode() {
      return this.mode === ModeToggle.LIGHT_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }

    /* get the current mode on screen */
    get modeStatus() {
      if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) {
        return ModeToggle.DARK_MODE;
      } else {
        return ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }

    /* Notify another plugins that the theme mode has changed */
    notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        if (this.isSysDarkPrefer) {
          if (this.isLightMode) {
            this.clearMode();
          } else {
            this.setLight();
          }
        } else {
          if (this.isDarkMode) {
            this.clearMode();
          } else {
            this.setDark();
          }
        }
      } else {
        if (this.isSysDarkPrefer) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    } /* flipMode() */
  } /* ModeToggle */

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/favicons/avatar.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <h1 class="site-title">
      <a href="/">Baymax's Blog</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">Talk is cheap. Show me the code.</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>首页</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>分类</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>标签</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>归档</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-user-circle"></i>
            

            <span>关于</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="mode-toggle btn" aria-label="Switch Mode">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/Baymax104"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['wzy1048168235','163.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">首页</a>
            </span>

          
        
          
        
          
            
              <span>K短路算法</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      文章
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="搜索..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">取消</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>K短路算法</h1>

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        发表于
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1717238160"
  data-df="YYYY/MM/DD"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  2024/06/01
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          作者

          <em>
            
              <a href="https://github.com/Baymax104">John Wei</a>
            
          </em>
        </span>

        <!-- read time -->
        <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="2970 字"
>
  <em>16 分钟</em>阅读</span>

      </div>
      <!-- .d-flex -->
    </div>
    <!-- .post-meta -->
  </header>

  <div class="content">
    <h2 id="前言"><span class="me-2">前言</span><a href="#前言" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>在大二做树数据结构课设时，选到的题目是做一个校园地图导航应用，其中需要实现一个寻路算法，并且有一个功能需要展示到达一个地点的多种路线方案，最终采用了K短路算法，在此记录一下</p>

<p>为了说明方便，文中用Python来实现代码</p>

<h2 id="堆优化dijkstra算法"><span class="me-2">堆优化Dijkstra算法</span><a href="#堆优化dijkstra算法" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Dijkstra算法是解决最短路径问题的经典算法，通过逐步扩展已知的最短路径集来找到最短路径，每次从未处理的顶点中选择一个距离源顶点最近的顶点，更新其邻居的最短路径值，直到所有顶点都处理完毕</p>

<p>在选择距离源顶点最近的顶点这一步上，可以使用最小堆来优化，算法的时间复杂度可以降到$O(n\log n)$​</p>

<p>首先定义一个状态类，存储顶点和当前最短距离的状态</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Entry</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">vertex</span><span class="p">,</span> <span class="n">dist</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">vertex</span> <span class="o">=</span> <span class="n">vertex</span>
        <span class="n">self</span><span class="p">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span>

    <span class="c1"># 比较当前最短距离，用于最小堆比较
</span>    <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">dist</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">.</span><span class="n">dist</span>
</pre></td></tr></tbody></table></code></div></div>

<p>使用heapq模块实现最小堆操作，堆优化的Dijkstra算法实现如下</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="c1"># size：顶点个数
# source：源点
# graph：带权无向图，邻接矩阵
</span><span class="n">visited</span> <span class="o">=</span> <span class="p">[</span><span class="bp">False</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>  <span class="c1"># 各顶点的访问状态
</span><span class="n">dists</span> <span class="o">=</span> <span class="p">[</span><span class="n">inf</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>  <span class="c1"># 源点到各顶点的最短距离
</span><span class="n">heap</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># 最小堆
</span>
<span class="c1"># 初始状态
</span><span class="n">dists</span><span class="p">[</span><span class="n">source</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">cur_v</span> <span class="o">=</span> <span class="n">source</span>
<span class="n">heapq</span><span class="p">.</span><span class="nf">heappush</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">cur_v</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="k">while</span> <span class="nf">len</span><span class="p">(</span><span class="n">heap</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">cur_v</span> <span class="o">=</span> <span class="n">heapq</span><span class="p">.</span><span class="nf">heappop</span><span class="p">(</span><span class="n">heap</span><span class="p">).</span><span class="n">vertex</span>
    <span class="n">visited</span><span class="p">[</span><span class="n">cur_v</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="c1"># 当前顶点的邻接点
</span>    <span class="n">adjoins</span> <span class="o">=</span> <span class="p">[</span><span class="n">adjoin</span> <span class="k">for</span> <span class="n">adjoin</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> 
               <span class="k">if</span> <span class="n">adjoin</span> <span class="o">!=</span> <span class="n">cur_v</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">cur_v</span><span class="p">][</span><span class="n">adjoin</span><span class="p">]</span> <span class="o">!=</span> <span class="n">inf</span><span class="p">]</span>
    <span class="c1"># 遍历邻接点
</span>    <span class="k">for</span> <span class="n">adjoin</span> <span class="ow">in</span> <span class="n">adjoins</span><span class="p">:</span>
        <span class="c1"># 若邻接点未访问过
</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">visited</span><span class="p">[</span><span class="n">adjoin</span><span class="p">]:</span>
            <span class="c1"># 源点到当前顶点的最短距离 + 当前顶点到邻接点的距离 &lt; 源点到邻接点的最短距离
</span>            <span class="k">if</span> <span class="n">dists</span><span class="p">[</span><span class="n">cur_v</span><span class="p">]</span> <span class="o">+</span> <span class="n">graph</span><span class="p">[</span><span class="n">cur_v</span><span class="p">][</span><span class="n">adjoin</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">dists</span><span class="p">[</span><span class="n">adjoin</span><span class="p">]:</span>
                <span class="c1"># 更新源点到邻接点的最短距离
</span>                <span class="n">dists</span><span class="p">[</span><span class="n">adjoin</span><span class="p">]</span> <span class="o">=</span> <span class="n">dists</span><span class="p">[</span><span class="n">cur_v</span><span class="p">]</span> <span class="o">+</span> <span class="n">graph</span><span class="p">[</span><span class="n">cur_v</span><span class="p">][</span><span class="n">adjoin</span><span class="p">]</span>
                <span class="n">heapq</span><span class="p">.</span><span class="nf">heappush</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">adjoin</span><span class="p">,</span> <span class="n">dists</span><span class="p">[</span><span class="n">adjoin</span><span class="p">]))</span>
</pre></td></tr></tbody></table></code></div></div>

<p>运行测试用例</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="n">graph</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">inf</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">inf</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="p">[</span><span class="n">inf</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">inf</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">inf</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
    <span class="p">[</span><span class="n">inf</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="p">]</span>
<span class="n">size</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">source</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">dists</span> <span class="o">=</span> <span class="nc">Dijkstra</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">dists = </span><span class="si">{</span><span class="n">dists</span><span class="si">}</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># 运行结果
# dists = [0, 2, 5, 6, 7]
# 顶点0到顶点1的最短距离为2
# 顶点0到顶点2的最短距离为5
# 顶点0到顶点3的最短距离为6
# 顶点0到顶点4的最短距离为7
</span></pre></td></tr></tbody></table></code></div></div>

<h2 id="a算法"><span class="me-2">A*算法</span><a href="#a算法" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>A*算法定义了一个对当前状态的估价函数$f(x)=g(x)+h(x)$，其中$g(x)$为从初始状态到达当前状态的实际代价，$h(x)$为从当前状态到达目标状态的最佳路径的估计代价，$f(x)$为当前状态的代价值</p>

<p>应用在最短路径问题中，在Dijkstra算法中选择距离源顶点最近的顶点这一步上，对应到A*算法，就变成了<strong>选择代价值$f(x)$​​最小的顶点</strong>，这依然可以使用最小堆来实现</p>

<p>A*算法的关键在于估计代价$h(x)$的实现，$h(x)$也被称为启发式函数，$h(x)$计算的估计代价越精确，得到的最短路径越优，但同时越精确的代价计算消耗的时间越多，因此在$h(x)$​的实现上需要<strong>权衡精确性和速度</strong></p>

<p>同时，$h(x)$代价值的大小也会影响总代价值$f(x)$​</p>

<ul>
  <li>$h(x)$过小或等于0，A*算法退化为Dijkstra算法</li>
  <li>$h(x)$过大，A*算法退化为BFS算法</li>
</ul>

<p>在导航应用中，可知某个地点的经纬度，可以看做一个网格地图，在网格地图中，有以下几种启发式函数</p>

<ul>
  <li>曼哈顿距离：$h(v)=\lvert v_x-goal_x\rvert+\lvert v_y-goal_y\rvert$</li>
  <li>欧几里得距离：$h(v)=\sqrt{(v_x-goal_x)^2+(v_y-goal_y)^2}$</li>
  <li>切比雪夫距离：$h(v)=\max(\lvert v_x-goal_x\rvert ,\lvert v_y-goal_y\rvert)$</li>
</ul>

<p>使用欧几里得距离来实现A*算法如下</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre></td><td class="rouge-code"><pre><span class="c1"># h函数实现欧几里得距离
</span><span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">goal</span><span class="p">):</span>
    <span class="k">return</span> <span class="nf">sqrt</span><span class="p">((</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">goal</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">goal</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">a_star</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">goal</span><span class="p">):</span>
    <span class="n">visited</span> <span class="o">=</span> <span class="p">[</span><span class="bp">False</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>  <span class="c1"># 各顶点的访问状态
</span>    <span class="n">dists</span> <span class="o">=</span> <span class="p">[</span><span class="n">inf</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>  <span class="c1"># 源点到各顶点的最短距离
</span>    <span class="n">heap</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># 最小堆
</span>    <span class="n">back_from</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># 记录回溯路径
</span>
    <span class="c1"># 初始状态
</span>    <span class="n">dists</span><span class="p">[</span><span class="n">source</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">cur_v</span> <span class="o">=</span> <span class="n">source</span>
    <span class="n">heapq</span><span class="p">.</span><span class="nf">heappush</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">cur_v</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

    <span class="k">while</span> <span class="nf">len</span><span class="p">(</span><span class="n">heap</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">cur_v</span> <span class="o">=</span> <span class="n">heapq</span><span class="p">.</span><span class="nf">heappop</span><span class="p">(</span><span class="n">heap</span><span class="p">).</span><span class="n">vertex</span>
        <span class="n">visited</span><span class="p">[</span><span class="n">cur_v</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="c1"># 到达目标顶点停止
</span>        <span class="k">if</span> <span class="n">cur_v</span> <span class="o">==</span> <span class="n">goal</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="c1"># 当前顶点的邻接点
</span>        <span class="n">adjoins</span> <span class="o">=</span> <span class="p">[</span><span class="n">adjoin</span> <span class="k">for</span> <span class="n">adjoin</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> 
                   <span class="k">if</span> <span class="n">adjoin</span> <span class="o">!=</span> <span class="n">cur_v</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">cur_v</span><span class="p">][</span><span class="n">adjoin</span><span class="p">]</span> <span class="o">!=</span> <span class="n">inf</span><span class="p">]</span>
        <span class="c1"># 遍历邻接点
</span>        <span class="k">for</span> <span class="n">adjoin</span> <span class="ow">in</span> <span class="n">adjoins</span><span class="p">:</span>
            <span class="c1"># 若邻接点未访问过
</span>            <span class="k">if</span> <span class="ow">not</span> <span class="n">visited</span><span class="p">[</span><span class="n">adjoin</span><span class="p">]:</span>
                <span class="c1"># 源点到当前顶点的最短距离 + 当前顶点到邻接点的距离 &lt; 源点到邻接点的最短距离
</span>                <span class="k">if</span> <span class="n">dists</span><span class="p">[</span><span class="n">cur_v</span><span class="p">]</span> <span class="o">+</span> <span class="n">graph</span><span class="p">[</span><span class="n">cur_v</span><span class="p">][</span><span class="n">adjoin</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">dists</span><span class="p">[</span><span class="n">adjoin</span><span class="p">]:</span>
                    <span class="c1"># 记录回溯路径
</span>                    <span class="n">back_from</span><span class="p">[</span><span class="n">adjoin</span><span class="p">]</span> <span class="o">=</span> <span class="n">cur_v</span>
                    <span class="c1"># 更新源点到邻接点的最短距离
</span>                    <span class="n">dists</span><span class="p">[</span><span class="n">adjoin</span><span class="p">]</span> <span class="o">=</span> <span class="n">dists</span><span class="p">[</span><span class="n">cur_v</span><span class="p">]</span> <span class="o">+</span> <span class="n">graph</span><span class="p">[</span><span class="n">cur_v</span><span class="p">][</span><span class="n">adjoin</span><span class="p">]</span>
                    <span class="c1"># 计算代价
</span>                    <span class="n">cost</span> <span class="o">=</span> <span class="n">dists</span><span class="p">[</span><span class="n">adjoin</span><span class="p">]</span> <span class="o">+</span> <span class="nf">h</span><span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="n">adjoin</span><span class="p">],</span> <span class="n">position</span><span class="p">[</span><span class="n">goal</span><span class="p">])</span>
                    <span class="n">heapq</span><span class="p">.</span><span class="nf">heappush</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">adjoin</span><span class="p">,</span> <span class="n">cost</span><span class="p">))</span>

    <span class="c1"># 回溯路径
</span>    <span class="n">path</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">cur_v</span> <span class="o">=</span> <span class="n">goal</span>
    <span class="k">while</span> <span class="n">cur_v</span> <span class="ow">in</span> <span class="n">back_from</span><span class="p">:</span>
        <span class="n">path</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">cur_v</span><span class="p">)</span>
        <span class="n">cur_v</span> <span class="o">=</span> <span class="n">back_from</span><span class="p">[</span><span class="n">cur_v</span><span class="p">]</span>
    <span class="n">path</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">cur_v</span><span class="p">)</span>
    <span class="n">path</span><span class="p">.</span><span class="nf">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">path</span><span class="p">,</span> <span class="n">dists</span><span class="p">[</span><span class="n">goal</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></div></div>

<p>运行测试用例</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="n">graph</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">inf</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">inf</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="p">[</span><span class="n">inf</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">inf</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">inf</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
    <span class="p">[</span><span class="n">inf</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="p">]</span>
<span class="n">size</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">source</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">goal</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">position</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="n">path</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="nf">a_star</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">goal</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">path = </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="se">\n</span><span class="s">dist = </span><span class="si">{</span><span class="n">dist</span><span class="si">}</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># 运行结果
# path = [0, 1, 4]
# dist = 7
# 最短路径为0-&gt;1-&gt;4，距离为7
</span></pre></td></tr></tbody></table></code></div></div>

<blockquote class="prompt-tip">
  <p>关于A*算法的更多介绍，可参考：<a href="http://theory.stanford.edu/~amitp/GameProgramming/">Amit’s A* Pages</a></p>
</blockquote>

<h2 id="k短路算法"><span class="me-2">K短路算法</span><a href="#k短路算法" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>A*算法中每次选取的都是代价最小的顶点，这个选取就是一种取最短的最优化，当选取的顶点第一次为目标顶点时，第一条最短的路径就到达了目标顶点，那么推广一下，<strong>求第k条最短路径，也就需要选取的顶点第k次为目标顶点</strong></p>

<p>我们可以将<code class="language-plaintext highlighter-rouge">visited</code>数组保存的内容变为到达顶点的次数，每次到达一个顶点<code class="language-plaintext highlighter-rouge">i</code>，令<code class="language-plaintext highlighter-rouge">visited[i] += 1</code>，当到达的顶点为目标顶点且到达次数为k时，跳出循环</p>

<p>此外，还有两个要注意的问题</p>

<ul>
  <li>
    <p>对于<code class="language-plaintext highlighter-rouge">visited[i] &gt; k</code>的顶点，不应该继续遍历它们的邻接点</p>

    <p>因为当<code class="language-plaintext highlighter-rouge">visited[i] &gt; k</code>时，表示已经访问了该顶点k次，那么在产生的k条最短路径中一定都经过了该顶点，也就是<strong>经过该顶点产生了k条合法的最短路径</strong>，那么该顶点的邻接点状态就不必放入最小堆中进行比较，优化了运行效率，同时，这样也可以避免当图中出现环时，算法困在环中</p>
  </li>
  <li>
    <p>在将邻接点状态放入最小堆时，邻接点状态应包含邻接点的前驱顶点（也就是当前顶点）</p>

    <p>这是在<strong>无向图或非简单有向图</strong>中会出现的问题，当遍历邻接点状态时，在无向图中会将当前顶点的前驱顶点也作为邻接点，将它的状态放入最小堆中，这可能会导致算法不停地在当前顶点和前驱顶点间跳转，陷入死循环</p>

    <p>在Dijkstra算法或A*算法中，我们通过<code class="language-plaintext highlighter-rouge">visited</code>数组来判断顶点是否被访问过，在遍历邻接点状态时，将未访问过的邻接点状态放入最小堆中，这样就过滤掉了前驱顶点，因为<strong>前驱顶点必然被访问过</strong></p>

    <p>在K短路算法中，我们使用<code class="language-plaintext highlighter-rouge">visited</code>数组来记录顶点的访问次数，仅仅通过访问次数难以过滤掉前驱顶点，因此在将邻接点状态放入最小堆时，应该将当前顶点作为前驱顶点添加到状态中。在遍历下一个顶点的邻接点时，就可以通过判断邻接点是否是该顶点的前驱顶点来过滤掉前驱顶点</p>
  </li>
</ul>

<p>修改状态类，增加代价、前驱顶点信息</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Entry</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">vertex</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">pre_entry</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">vertex</span> <span class="o">=</span> <span class="n">vertex</span>
        <span class="n">self</span><span class="p">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span>  <span class="c1"># 实际距离
</span>        <span class="n">self</span><span class="p">.</span><span class="n">cost</span> <span class="o">=</span> <span class="n">cost</span>  <span class="c1"># 加上h(x)的代价值
</span>        <span class="n">self</span><span class="p">.</span><span class="n">pre_entry</span> <span class="o">=</span> <span class="n">pre_entry</span>  <span class="c1"># 前驱顶点
</span>
    <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">cost</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">.</span><span class="n">cost</span>
</pre></td></tr></tbody></table></code></div></div>

<p>K短路算法实现如下</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">goal</span><span class="p">):</span>
    <span class="k">return</span> <span class="nf">sqrt</span><span class="p">((</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">goal</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">goal</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">ksp</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">goal</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
    <span class="n">visited</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>  <span class="c1"># 各顶点的访问次数
</span>    <span class="n">heap</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># 最小堆
</span>
    <span class="c1"># 初始状态
</span>    <span class="n">cur_entry</span> <span class="o">=</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">heapq</span><span class="p">.</span><span class="nf">heappush</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">cur_entry</span><span class="p">)</span>

    <span class="k">while</span> <span class="nf">len</span><span class="p">(</span><span class="n">heap</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">cur_entry</span> <span class="o">=</span> <span class="n">heapq</span><span class="p">.</span><span class="nf">heappop</span><span class="p">(</span><span class="n">heap</span><span class="p">)</span>
        <span class="n">cur_v</span> <span class="o">=</span> <span class="n">cur_entry</span><span class="p">.</span><span class="n">vertex</span>
        <span class="n">pre_entry</span> <span class="o">=</span> <span class="n">cur_entry</span><span class="p">.</span><span class="n">pre_entry</span>

        <span class="c1"># 增加访问次数
</span>        <span class="n">visited</span><span class="p">[</span><span class="n">cur_v</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># 到达目标顶点停止
</span>        <span class="k">if</span> <span class="n">cur_v</span> <span class="o">==</span> <span class="n">goal</span> <span class="ow">and</span> <span class="n">visited</span><span class="p">[</span><span class="n">cur_v</span><span class="p">]</span> <span class="o">==</span> <span class="n">k</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="c1"># 访问次数大于k，跳过
</span>        <span class="k">if</span> <span class="n">visited</span><span class="p">[</span><span class="n">cur_v</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">k</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="c1"># 当前顶点的邻接点
</span>        <span class="n">adjoins</span> <span class="o">=</span> <span class="p">[</span><span class="n">adjoin</span> <span class="k">for</span> <span class="n">adjoin</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
                   <span class="k">if</span> <span class="n">adjoin</span> <span class="o">!=</span> <span class="n">cur_v</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">cur_v</span><span class="p">][</span><span class="n">adjoin</span><span class="p">]</span> <span class="o">!=</span> <span class="n">inf</span><span class="p">]</span>
        <span class="c1"># 遍历邻接点
</span>        <span class="k">for</span> <span class="n">adjoin</span> <span class="ow">in</span> <span class="n">adjoins</span><span class="p">:</span>
            <span class="c1"># 当邻接点不是前驱顶点
</span>            <span class="k">if</span> <span class="n">pre_entry</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">pre_entry</span><span class="p">.</span><span class="n">vertex</span> <span class="o">!=</span> <span class="n">adjoin</span><span class="p">:</span>
                <span class="c1"># 计算代价
</span>                <span class="n">dist</span> <span class="o">=</span> <span class="n">cur_entry</span><span class="p">.</span><span class="n">dist</span> <span class="o">+</span> <span class="n">graph</span><span class="p">[</span><span class="n">cur_v</span><span class="p">][</span><span class="n">adjoin</span><span class="p">]</span>
                <span class="n">cost</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="nf">h</span><span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="n">adjoin</span><span class="p">],</span> <span class="n">position</span><span class="p">[</span><span class="n">goal</span><span class="p">])</span>
                <span class="n">heapq</span><span class="p">.</span><span class="nf">heappush</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">adjoin</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">cur_entry</span><span class="p">))</span>

    <span class="c1"># 回溯路径
</span>    <span class="n">dist</span> <span class="o">=</span> <span class="n">cur_entry</span><span class="p">.</span><span class="n">dist</span>
    <span class="n">path</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">cur_entry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">path</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">cur_entry</span><span class="p">.</span><span class="n">vertex</span><span class="p">)</span>
        <span class="n">cur_entry</span> <span class="o">=</span> <span class="n">cur_entry</span><span class="p">.</span><span class="n">pre_entry</span>
    <span class="n">path</span><span class="p">.</span><span class="nf">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">path</span><span class="p">,</span> <span class="n">dist</span>
</pre></td></tr></tbody></table></code></div></div>

<p>运行测试用例</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="n">graph</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">inf</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">inf</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="p">[</span><span class="n">inf</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">inf</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">inf</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
    <span class="p">[</span><span class="n">inf</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="p">]</span>
<span class="n">size</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">source</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">goal</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">position</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span>
    <span class="n">path</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="nf">ksp</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">goal</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">第</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s">短路: ( path = </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s">, dist = </span><span class="si">{</span><span class="n">dist</span><span class="si">}</span><span class="s"> )</span><span class="sh">'</span><span class="p">)</span>
    
<span class="c1"># 运行结果
# 第1短路: ( path = [0, 1, 4], dist = 7 )
# 第2短路: ( path = [0, 1, 2, 4], dist = 12 )
# 第3短路: ( path = [0, 3, 4], dist = 15 )
# 第4短路: ( path = [0, 1, 3, 4], dist = 19 )
# 第5短路: ( path = [0, 3, 1, 4], dist = 19 )
# 第6短路: ( path = [0, 1, 4, 2, 1, 4], dist = 22 )
# 第7短路: ( path = [0, 1, 3, 0, 1, 4], dist = 23 )
# 第8短路: ( path = [0, 3, 1, 2, 4], dist = 24 )
</span></pre></td></tr></tbody></table></code></div></div>

<h2 id="算法应用"><span class="me-2">算法应用</span><a href="#算法应用" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>下面是当时实现的地图应用的截图，背景的地图使用的是高德的地图，地图上的地点以及路线均是通过K短路算法计算得到，再使用高德的API绘制在地图上</p>

<p>当前算法在一般情况下的运行效果不错，但当选定的两个地点过近时，计算得到的路径会有环（上面运行的示例结果中有包含环的结果），当前算法没有解决这一点，在应用中实现了一个过滤机制，若某条路径的路程大于等于最短路径路程的两倍，则去除该路径，经过该过滤机制，得出的路径结果已基本满足需求</p>

<p><a href="/assets/test.png" class="popup img-link  shimmer"><img src="/assets/test.png" alt="test" loading="lazy"></a></p>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/%E7%AE%97%E6%B3%95/">算法</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/%E7%AE%97%E6%B3%95/"
            class="post-tag no-text-decoration"
          >算法</a>
        
          <a
            href="/tags/%E5%9B%BE%E8%AE%BA/"
            class="post-tag no-text-decoration"
          >图论</a>
        
          <a
            href="/tags/%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84/"
            class="post-tag no-text-decoration"
          >最短路径</a>
        
          <a
            href="/tags/k%E7%9F%AD%E8%B7%AF/"
            class="post-tag no-text-decoration"
          >K短路</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          本文由作者按照 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         进行授权
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">分享</span>
  <span class="share-icons">
    
    
    

    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="分享链接"
      data-title-succeed="链接已复制！"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">最近更新</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/ml-%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/">《机器学习》——集成学习</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/ml-%E8%B4%9D%E5%8F%B6%E6%96%AF/">《机器学习》——贝叶斯分类器</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/ml-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/">《机器学习》——神经网络</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/ml-%E5%86%B3%E7%AD%96%E6%A0%91/">《机器学习》——决策树</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/ml-%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B/">《机器学习》——线性模型</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">热门标签</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/android/">Android</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/vue3/">Vue3</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/kotlin/">Kotlin</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/c/">C#</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/wpf/">WPF</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%E7%AE%97%E6%B3%95/">算法</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/python/">Python</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="ps-0 pe-4">
    <h2 class="panel-heading ps-3 pt-2 mb-2">文章内容</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->














  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">相关文章</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/KMP%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%AF%A6%E8%A7%A3/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1709827200"
  data-df="YYYY/MM/DD"
  
>
  2024/03/08
</time>

              <h4 class="pt-0 my-2">KMP代码实现详解</h4>
              <div class="text-muted">
                <p>
                  





                  前言

在考研时学会了KMP算法的手算，没有深究它的算法实现（主要是也不咋考），今天在LeetCode上刷到KMP的题目，在此记录一下代码实现的理解

相关LeetCode题目


  28. 找出字符串中第一个匹配项的下标 - 力扣（LeetCode）
  459. 重复的子字符串 - 力扣（LeetCode）


KMP算法

KMP算法主要就是两步


  使用模式串生成next数组（...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1710509100"
  data-df="YYYY/MM/DD"
  
>
  2024/03/15
</time>

              <h4 class="pt-0 my-2">二叉树的遍历</h4>
              <div class="text-muted">
                <p>
                  





                  前言

二叉树的遍历是二叉树的基础算法，本文对个人的遍历写法做个记录

深度优先遍历

递归写法

递归遍历比较简单，不作讲解和注释

// 前序遍历
void preorder(Node* node) {
    if (node) {
        visit(node);
        preorder(node-&amp;gt;left);
        preorder(node-&amp;...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95-%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1710764160"
  data-df="YYYY/MM/DD"
  
>
  2024/03/18
</time>

              <h4 class="pt-0 my-2">回溯算法——理论基础</h4>
              <div class="text-muted">
                <p>
                  





                  前言

我在大概两年前就学习过回溯算法，但总是学了就忘，写了很多例题但一到自己写就抓瞎，本质上还是不理解，现在打算跟着代码随想录系统的重新学一遍，记录一下自己的理解

递归for循环

回溯算法的本质就是穷举，但它比嵌套for更适用的一点是它可以实现任意k层的for循环，想象一下这个情境，输入一个参数k，实现k层嵌套循环。直接硬编码k层for循环是无法实现的，因为k是一个变化的参数，但是这个...
                </p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/requests/"
      class="btn btn-outline-primary"
      aria-label="上一篇"
    >
      <p>requests库基础</p>
    </a>
  

  
    <a
      href="/posts/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"
      class="btn btn-outline-primary"
      aria-label="下一篇"
    >
      <p>8086汇编语言基础</p>
    </a>
  
</nav>

            
              
              <!--  The comments switcher -->

  
  <!-- https://giscus.app/ -->
<script type="text/javascript">
  (function () {
    const origin = 'https://giscus.app';
    const iframe = 'iframe.giscus-frame';
    const lightTheme = 'light';
    const darkTheme = 'dark_dimmed';

    let initTheme = lightTheme;
    const html = document.documentElement;

    if (
      (html.hasAttribute('data-mode') &&
        html.getAttribute('data-mode') === 'dark') ||
      (!html.hasAttribute('data-mode') &&
        window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) {
      initTheme = darkTheme;
    }

    let giscusAttributes = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'baymax104/baymax104.github.io',
      'data-repo-id': 'R_kgDOLd0LpQ',
      'data-category': 'Announcements',
      'data-category-id': 'DIC_kwDOLd0Lpc4CeBz-',
      'data-mapping': 'title',
      'data-reactions-enabled': '1',
      'data-emit-metadata': '0',
      'data-theme': initTheme,
      'data-input-position': 'bottom',
      'data-lang': 'zh-CN',
      'data-loading': 'lazy',
      crossorigin: 'anonymous',
      async: ''
    };

    let giscusScript = document.createElement('script');
    Object.entries(giscusAttributes).forEach(([key, value]) =>
      giscusScript.setAttribute(key, value)
    );
    document.getElementById('tail-wrapper').appendChild(giscusScript);

    addEventListener('message', (event) => {
      if (
        event.source === window &&
        event.data &&
        event.data.direction === ModeToggle.ID
      ) {
        /* global theme mode changed */
        const mode = event.data.message;
        const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme;

        const message = {
          setConfig: {
            theme: theme
          }
        };

        const giscus = document.querySelector(iframe).contentWindow;
        giscus.postMessage({ giscus: message }, origin);
      }
    });
  })();
</script>



            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2024</time>

    
      <a href="https://github.com/Baymax104">John Wei</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。"
      >保留部分权利。</span>
    
  </p>

  <p>本站采用 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 主题 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a>
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">热门标签</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/android/">Android</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/vue3/">Vue3</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/kotlin/">Kotlin</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/c/">C#</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/wpf/">WPF</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%E7%AE%97%E6%B3%95/">算法</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/python/">Python</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">发现新版本的内容。</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      更新
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->

    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->




  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    <script src="/assets/lib/jquery/jquery.min.js"></script>
  

  
    <script src="/assets/lib/bootstrap/bootstrap.bundle.min.js"></script>
  

  
    <script src="/assets/lib/simple-jekyll-search/simple-jekyll-search.min.js"></script>
  

  
    <script src="/assets/lib/loading-attribute-polyfill/loading-attribute-polyfill.umd.min.js"></script>
  

  
    <script src="/assets/lib/magnific-popup/jquery.magnific-popup.min.js"></script>
  

  
    <script src="/assets/lib/clipboard/clipboard.min.js"></script>
  

  
    <script src="/assets/lib/dayjs/dayjs.min.js"></script>
  

  
    <script src="/assets/lib/dayjs/locale/en.min.js"></script>
  

  
    <script src="/assets/lib/dayjs/plugin/relativeTime.min.js"></script>
  

  
    <script src="/assets/lib/dayjs/plugin/localizedFormat.min.js"></script>
  

  
    <script src="/assets/lib/tocbot/tocbot.min.js"></script>
  








<script defer src="/assets/js/dist/post.min.js"></script>


  <!-- MathJax -->
  <script>
    /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */
    MathJax = {
      tex: {
        /* start/end delimiter pairs for in-line math */
        inlineMath: [
          ['$', '$'],
          ['\\(', '\\)']
        ],
        /* start/end delimiter pairs for display math */
        displayMath: [
          ['$$', '$$'],
          ['\\[', '\\]']
        ],
        /* equation numbering */
        tags: 'ams'
      }
    };
  </script>
  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="/assets/lib/mathjax/tex-chtml.js"></script>





    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  /* Note: dependent library will be loaded in `js-selector.html` */
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5"></p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

